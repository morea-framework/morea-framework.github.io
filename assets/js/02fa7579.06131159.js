"use strict";(self.webpackChunkMorea_Framework=self.webpackChunkMorea_Framework||[]).push([[1703],{3905:function(e,t,r){r.d(t,{Zo:function(){return d},kt:function(){return m}});var n=r(7294);function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){a(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function l(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var s=n.createContext({}),p=function(e){var t=n.useContext(s),r=t;return e&&(r="function"==typeof e?e(t):i(i({},t),e)),r},d=function(e){var t=p(e.components);return n.createElement(s.Provider,{value:t},e.children)},c={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},u=n.forwardRef((function(e,t){var r=e.components,a=e.mdxType,o=e.originalType,s=e.parentName,d=l(e,["components","mdxType","originalType","parentName"]),u=p(r),m=a,f=u["".concat(s,".").concat(m)]||u[m]||c[m]||o;return r?n.createElement(f,i(i({ref:t},d),{},{components:r})):n.createElement(f,i({ref:t},d))}));function m(e,t){var r=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var o=r.length,i=new Array(o);i[0]=u;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l.mdxType="string"==typeof e?e:a,i[1]=l;for(var p=2;p<o;p++)i[p]=r[p];return n.createElement.apply(null,i)}return n.createElement.apply(null,r)}u.displayName="MDXCreateElement"},9182:function(e,t,r){r.r(t),r.d(t,{frontMatter:function(){return l},contentTitle:function(){return s},metadata:function(){return p},toc:function(){return d},default:function(){return u}});var n=r(2122),a=r(9756),o=(r(7294),r(3905)),i=["components"],l={title:"MoreaGenerator plugin"},s=void 0,p={unversionedId:"developers/morea-generator",id:"developers/morea-generator",isDocsHomePage:!1,title:"MoreaGenerator plugin",description:"The Morea plugin is a Jekyll plugin written in Ruby and located in the _plugins directory.",source:"@site/docs/developers/morea-generator.md",sourceDirName:"developers",slug:"/developers/morea-generator",permalink:"/docs/developers/morea-generator",version:"current",lastUpdatedBy:"Philip Johnson",lastUpdatedAt:1627836639,formattedLastUpdatedAt:"8/1/2021",frontMatter:{title:"MoreaGenerator plugin"},sidebar:"tutorialSidebar",previous:{title:"Overview",permalink:"/docs/developers/overview"},next:{title:"Morea index markdown files",permalink:"/docs/developers/morea-index-markdown"}},d=[],c={toc:d};function u(e){var t=e.components,r=(0,a.Z)(e,i);return(0,o.kt)("wrapper",(0,n.Z)({},c,r,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("p",null,"The Morea plugin is a Jekyll plugin written in Ruby and located in the ",(0,o.kt)("inlineCode",{parentName:"p"},"_plugins")," directory."),(0,o.kt)("p",null,"The plugin code is pretty straightforward, though not well-written.  (Part of the attraction of developing the Morea Framework for me was the chance to try Ruby, so MoreaGenerator is my first and (at the time of writing) only Ruby program I have ever written.) I would gratefully accept pull requests that improve the structure and use of Ruby language idioms."),(0,o.kt)("p",null,"The plugin works as follows:"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"The ",(0,o.kt)("inlineCode",{parentName:"p"},"generate()")," method reads in all of the files in the ",(0,o.kt)("inlineCode",{parentName:"p"},"morea/")," directory.  All files that end in the extension ",(0,o.kt)("inlineCode",{parentName:"p"},".md"),' are assumed to be "real" Morea files, in that they should have morea IDs and so forth. These files are processed in the ',(0,o.kt)("inlineCode",{parentName:"p"},"processMoreaFile()")," method.  Other files not ending in ",(0,o.kt)("inlineCode",{parentName:"p"},".md")," are just handed off to Jekyll for standard processing through the ",(0,o.kt)("inlineCode",{parentName:"p"},"processNonMoreaFile()")," method.")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"The ",(0,o.kt)("inlineCode",{parentName:"p"},"processMoreaFile()")," method creates a new ",(0,o.kt)("inlineCode",{parentName:"p"},"MoreaPage")," instance corresponding to each file. A ",(0,o.kt)("inlineCode",{parentName:"p"},"MoreaPage")," is just a regular Jekyll ",(0,o.kt)("inlineCode",{parentName:"p"},"Page")," with some additional state, such as the related outcomes, referencing assessments, referencing modules, etc.")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"The ",(0,o.kt)("inlineCode",{parentName:"p"},"processMoreaFile()")," method also figures out the type of the instance (i.e. Module, Outcome, Reading, Experience, or Assessment) and updates site variables that hold all of the defined Morea instances of each type.  In the case of Modules, there is a special instance called ",(0,o.kt)("inlineCode",{parentName:"p"},"ModulePage")," that is created.")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"There is data validation done in both ",(0,o.kt)("inlineCode",{parentName:"p"},"processMoreaFile()")," (where each page is checked for required YAML front matter, such as a morea_id field) and in the ",(0,o.kt)("inlineCode",{parentName:"p"},"generate()")," method (after all of the pages are read in, we check to make sure that a reference to a morea_id has an associated instance and so forth.")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"If we have read in all of the files and didn't detect any data validation errors, then the plugin ends normally after printing out some summary statistics.  If any fatal data validation errors occur, then the plugin prints out a message indicating the problem and calls ",(0,o.kt)("inlineCode",{parentName:"p"},"exit")," to terminate Jekyll immediately.   Though experience, I've found it's more user friendly to \"fail fast\" and force you to fix errors right away."))))}u.isMDXComponent=!0}}]);